
<script>
var local = false;
</script>

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Juggling Motion Capture</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/darkly/bootstrap.min.css" rel="stylesheet" integrity="sha384-w+8Gqjk9Cuo6XH9HKHG5t5I1VR4YBNdPt/29vwgfZR485eoEJZ8rJRbm3TR32P6k" crossorigin="anonymous">
</head>
<body onload="load_model_hosted()">
<div id="logo" style="display:inline;">
	<img style="border-radius: 15px;" src="images/LOGO.png" width='150px'>
</div>
<div id="heading" style="white-space:nowrap">
	
	<div class="progress" id="progress">
		<div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"  aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
	</div>
	
	<div id="text" style="display:inline; white-space:nowrap;">
		<h2 id="status">Juggling Coach is loading...</h2>
	</div>
	<p class="err" id="errorMessage"></p>
  
	<div id="manual-file-loader"></div>

		<!-- Button trigger modal -->
		<button type="button" class="btn btn-primary video-btn" data-toggle="modal" data-src="https://www.youtube.com/embed/vwsDNcPwehU" 
		data-target="#myModal" style="margin-left: -145">
		  Launch Tutorial Video
		</button>
		  
		<!-- Modal -->
		<div class="modal fade bd-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
		
			  <div class="modal-body">
		
			   <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>        
				<!-- 16:9 aspect ratio -->
		<div class="embed-responsive embed-responsive-16by9">
		  <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/vwsDNcPwehU" id="video"  allowscriptaccess="always" allow="autoplay"></iframe>
		</div>
			  </div>
			</div>
		  </div>
		</div>
		<!-- End of Modal -->
		
		  
</div>



<div id="centralArea">
    <div class="centralItem" id="scatterPlotArea">
		<div id="scatterPlotContent" align="center"> 
			<div id="motionScatterPlot" style="background-color:#000000; width: 350px; height: 350px; border-radius: 15px;"></div>
		</div>
	</div>
	
	<div class="centralItem" id="mainVideo" align="center">
		<div class="card border-primary mb-3" style="max-width: 25rem; min-width: 360px; margin: 0 auto;" align="left">
			<div class="card-header"><button id="startAndStop" type="button" class="btn btn-primary">Start</button>
				<p id="fps" style="display: inline-block; float: right;"></p>
			</div>
				<div class="card-body" style="min-width: 360px;" align="center">
					<table cellpadding="0" cellspacing="0" width="0" border="0">
            <tr>
                <td>
                    <video id="videoInput" width=320 height=240 style="display: none;"></video>
                </td>
                <td>
                    <canvas id="canvasOutput" width=320 height=240></canvas>
                </td>
                <td></td>
                <td></td>
            </tr>
        </table>
				</div>
		</div>
	</div>
	
	<div class="centralItem" id="patternMatchingArea" align="center">
		<div id="patternMatching" align="center" style="background-color:#000000; width: 350px; height: 350px; border-radius: 15px;">
			

			<table cellpadding="0" cellspacing="0" width="0" border="0" align="center" class="display">
					<tr>
							<td style="padding-top:20px;" align="center"><img src="images/NO_PATTERN.png" width="50%" height="50%" id="patternImage"></td>
					</tr>
					<tr>
							<td id="patternText" align="center">NO PATTERN</td>
					</tr>
				<tr>
					<td id="throws" align="center" style="font-size: 22px;"></td>
				</tr>

		</table>


		</div>
	</div>
	
</div>
<div id="dropdownMenu">
	<ul class="nav nav-tabs" role="tablist">
	  <li class="active">
		<a href="#home" role="tab" class="nav-link active" data-toggle="tab" >HOME</a>
	  </li>
	  <li class="nav-item dropdown">
		<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">LESSONS</a>
		<div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 41px, 0px);">
		  <a href="#dropdown1" class="dropdown-item" role="tab" data-toggle="tab">LESSON 1</a>
		  <a href="#dropdown2" class="dropdown-item" role="tab" data-toggle="tab">LESSON 2</a>
		  <a href="#dropdown3" class="dropdown-item" role="tab" data-toggle="tab">LESSON 3</a>
		</div>
	  </li>
	</ul>
	<div id="myTabContent" class="tab-content">
	  <div class="tab-pane fade active show" id="home">
		<div class="jumbotron">
		  <p class="lead">
				<img style="float: right; border-radius: 10px;" src="images/TF-logo.png" width='80px' hspace="20">
				<img style="float: right; border-radius: 10px;" src="images/logo.jpg" width='65px' hspace="20">
				<h5><strong>
				Welcome to Computer Juggling Coach!</h3>
				<br>
				About this site:</strong><br>
				This is a free to use work-in-progress designed by a trio of students from CSU Monterey Bay. Its goal is to combine computer
				 vision (OpenCV) along with deep learning (Tensor Flow) to successfully recognize juggling patterns within a browser. It is 
				 currently in its Beta stage and we are working to improve its performance. In the meantime, we would appreciate any feedback 
				 you might have for us.<br>
				Feel free to contact us or leave feedback using this link: <a href="https://docs.google.com/forms/d/e/1FAIpQLSf9JXywtVPEZF6ZeFqkgPvZlnnja3nvENms6gnpIoBD3eq1OA/viewform?usp=sf_link" target="_blank">Click here to leave feedback (Will open in new tab)</a><br><br>
				We have some beginner lesson plans under the lessons tab you are welcome to use if you are new to juggling.<br><br>
				<strong>Instructions:</strong><br>
				To begin, simply click the <button id="example" type="button" class="btn btn-primary">Start</button> button above and grant access to 
				the site to use your webcam. No recordings will be saved of 
				any kind. The site is currently only tracking motion, so you can juggle using any size or color objects, but it is recommended 
				to use balls smaller than a softball. For best results, try to get the full pattern captured by the webcam. 
			</p>

		</div>
	  </div>
	  <div class="tab-pane fade" id="dropdown1">
		<div class="jumbotron">
				<img style="float: right; border-radius: 10px;" src="images/1-BALL.gif" width='160px' hspace="100">
				<h5><strong>The Basic Throw – 1 ball</strong></h5>
				<br>
				<p>
					If you are new to juggling, you’ll want to simply start with 1 ball. You will want to practice and master 
					the throw you will be using with 2 and 3 balls with only the 1 to begin. Throw the ball back and forth trying to 
					keep the height of the throw the same each time. The throw should be easily caught in the other hand without 
					having to move either hand very much at all.
				</p>
		</div>
	  </div>
	  <div class="tab-pane fade" id="dropdown2">
	  	<div class="jumbotron">
				<img style="float: right; border-radius: 10px;" src="images/2-BALLS.gif" width='160px' hspace="100">
				<h5><strong>The Cascade – 2 balls</strong></h5>
				<br>
				<p>
					After you are comfortable with your 1 ball throw, start practicing with 2 balls. 
					Take one ball in each hand begin by throwing the first ball across to the other hand and as 
					that ball reaches its peak, toss the second as demonstrated by the animation. The Cascade pattern 
					with 2 balls is not fluid. It’s unbalanced without a third ball, but this is great practice for 
					learning how to juggle with 3 balls.
				</p>
		</div>
	  </div>
	  <div class="tab-pane fade" id="dropdown3">
	  	<div class="jumbotron">
				<img style="float: right; border-radius: 10px;" src="images/3-BALL_FLASH.gif" width='160px' hspace="100">
				<h5><strong>The Flash – 3 balls</strong></h5>
				<br>
				<p>
					The first step to learning the 3-ball cascade is taking 1 ball in your non-dominant hand and 2 balls 
					in your dominant hand. You will attempt to throw all three balls to the opposite hand, one at a time, 
					catching them all. Refer to the animation for what this should look like. Continue to practice the 
					3-ball flash until you can repeat it relatively easy without dropping. 
					<br><br>
					The next step is to attempt 4 throws and catching without dropping.
					<br><br>
					After you have accomplished 4 complete throws, try 5, then 6 and so on. See how many throws you can 
					get in a row without dropping. 
						
				</p>	  
	  	</div>
	  </div>
	</div>
</div>
<script src="utils.js" type="text/javascript"></script>
<script src="app.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://unpkg.com/@tensorflow/tfjs"></script>
<script src="scatterplot.js" type="text/javascript"></script>
<script src="model.js" type="text/javascript"></script>
<script src="captureData.js" type="text/javascript"></script>

<script>

$(".nav a").on("click", function(){
  $(".nav").find(".active").removeClass("active");
  $(this).parent().addClass("active");
});


$(document).ready(function() {
var $videoSrc;  
$('.video-btn').click(function() {
    $videoSrc = $(this).data( "src" );
});
// when the modal is opened autoplay it  
$('#myModal').on('shown.bs.modal', function (e) {
// set the video src to autoplay and not to show related video. Youtube related video is like a box of chocolates... you never know what you're gonna get
$("#video").attr('src',$videoSrc + "?autoplay=1&amp;modestbranding=1&amp;showinfo=0" ); 
})
// stop playing the youtube video when I close the modal
$('#myModal').on('hide.bs.modal', function (e) {
    // a poor man's stop video
    $("#video").attr('src',$videoSrc); 
}) 
// document ready  
});
</script>

</body>
</html>
